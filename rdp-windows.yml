- name: Set up RDP
  run: |
    # إنشاء اسم مستخدم جديد وتوليد كلمة مرور عشوائية
    $user = "rdpuser"
    $password = [System.IO.Path]::GetRandomFileName().Replace(".", "A") + [System.IO.Path]::GetRandomFileName().Replace(".", "B")
    net user $user $password /add
    net localgroup administrators $user /add
    netsh advfirewall firewall add rule name="Open RDP" dir=in action=allow protocol=TCP localport=3389

    # جلب عنوان IP الخاص بالخادم
    $ip = (Invoke-RestMethod -Uri "http://ipinfo.io/ip").Trim()
    echo "IP Address: $ip"

    # إرسال بيانات الجلسة إلى بوت Telegram
    $message = "RDP Session Created: %0AIP Address: $ip %0AUsername: $user %0APassword: $password"
    Invoke-RestMethod -Uri "https://api.telegram.org/bot7047714100:AAHptINe1QLjomnzqKaOMnTm_YRmt5T5XAM/sendMessage?chat_id=<242676339>&text=$message"
